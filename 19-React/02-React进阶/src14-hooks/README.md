# Hooks

## 1. Hooks介绍
### 1.1 Hooks是什么
* Hook是React16.8的新增特性，它可以让我们在不编写class的情况下使用state以及其他的React特性(比如生命周期)
* Hook指的类似于useState、useEffect这样的函数，Hooks是对这类函数的统称
### 1.2 class组件相对于函数式组件有什么优势
* class组件可以定义自己的state，用来保存组件自己内部的状态
* class组件有自己的生命周期，我们可以在对应的生命周期中完成自己的逻辑
* class组件可以在状态改变时只会重新执行render函数以及我们希望重新调用的生命周期函数componentDidUpdate等
### 1.3 class组件存在的问题
* 随着业务的增多，class组件变得非常复杂
* 学习难度较大
* 组件复用状态难度大
### 1.4 Hooks使用场景
* Hook的出现基本可以代替我们之前所有使用class组件的地方(除了一些非常不常用的场景)
* 但是如果是一个旧的项目，你并不需要直接将所有的代码重构为Hooks，因为它完全向下兼容，你可以渐进式的来使用它
* Hook只能在函数组件中使用，不能在类组件，或者函数组件之外的地方使用

## 2. useState
### 2.1 介绍
* useState会定义一个与class里this.state功能完全相同的state变量，从而实现在函数式组件中应用state
### 2.2 参数
* 初始化值，如果不设置为undefined
### 2.3 返回值：数组，共有两个元素
* 元素1: 当前state的值
* 元素2: 新函数，用于设置新的值
### 2.4 使用规则
* 只能在函数最外层调用 Hook。不要在循环、条件判断或者子函数中调用
* 只能在React的函数组件中调用Hook。不要在其他JavaScript函数中调用
### 2.5 注意事项
* 修改值时不可直接采用点击事件的方式修改，应展开原State再传入新元素
  ```
    <button onClick={e => setFriends([...friends, "tom"])}>添加朋友</button>
  ```
    
## 3. useEffect
### 3.1 介绍
* useEffect会在函数式组件中实现类似class生命周期的功能，通过useEffect的Hook可以告诉React需要在渲染后执行某些操作
### 3.2 参数
* 参数一：传入一个回调函数，在React执行完更新DOM操作之后，就会回调这个函数
* 参数二：传入一个数组，数组内传入useEffect执行所依赖的元素，即当该元素发生变化或页面刷新时才执行该useEffect。传入空数组则该useEffect只在页面刷新时执行
### 3.3 执行规则
1. 在React执行完更新DOM操作之后，就会回调这个函数
2. 默认情况下，无论是第一次渲染之后还是每次更新之后，都会执行这个回调函数
3. return一个回调函数，在取消事件订阅时自动调用
4. 定义多个useEffect时按其定义的先后顺序执行